<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Outlier Detection and NHS Icons • controlcharts</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Outlier Detection and NHS Icons">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">controlcharts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/aesthetic_options.html">Aesthetic Options</a></li>
    <li><a class="dropdown-item" href="../articles/chart_types.html">Chart Types in controlcharts</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started with the `controlcharts` package</a></li>
    <li><a class="dropdown-item" href="../articles/interactive_charts.html">Portable Interactive Control Charts</a></li>
    <li><a class="dropdown-item" href="../articles/outlier_detection.html">Outlier Detection and NHS Icons</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Outlier Detection and NHS Icons</h1>
            
      

      <div class="d-none name"><code>outlier_detection.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Statistical Process Control (SPC) charts are powerful tools for
detecting signals of change in processes over time. The
<code>controlcharts</code> package provides comprehensive outlier
detection capabilities to help identify when a process has shifted from
its baseline state.</p>
<p>This vignette demonstrates:</p>
<ul>
<li>
<strong>Four outlier detection methods</strong>: astronomical
points, shifts, trends, and 2-in-3 patterns</li>
<li>
<strong>Custom detection parameters</strong>: adjusting sensitivity
for shift and trend lengths</li>
<li>
<strong>Directional flagging</strong>: specifying what constitutes
improvement vs deterioration</li>
<li>
<strong>NHS icons</strong>: variation and assurance icons for visual
interpretation</li>
<li>
<strong>Combined approaches</strong>: using multiple detection
methods simultaneously</li>
</ul>
<p>All outlier detection settings are configured through the
<code>outlier_settings</code> parameter, while NHS icons are configured
through the <code>nhs_icon_settings</code> parameter.</p>
</div>
<div class="section level2">
<h2 id="outlier-detection-methods">Outlier Detection Methods<a class="anchor" aria-label="anchor" href="#outlier-detection-methods"></a>
</h2>
<div class="section level3">
<h3 id="astronomical-points">Astronomical Points<a class="anchor" aria-label="anchor" href="#astronomical-points"></a>
</h3>
<p>Astronomical points (also called astronomical signals or special
cause variation) are individual data points that fall outside the
statistical control limits. By default, these are points beyond the
3-sigma limits.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with some extreme outliers</span></span>
<span><span class="va">dat_astro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  infections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, mean <span class="op">=</span> <span class="fl">15</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                 <span class="fl">28</span>,  <span class="co"># Astronomical point</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span>, mean <span class="op">=</span> <span class="fl">15</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                 <span class="fl">6</span>,   <span class="co"># Astronomical point</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">7</span>, mean <span class="op">=</span> <span class="fl">15</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_astro</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_astro</span>,</span>
<span>                   keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                   numerators <span class="op">=</span> <span class="va">infections</span>,</span>
<span>                   spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                   outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                     astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     astronomical_limit <span class="op">=</span> <span class="st">"3 Sigma"</span></span>
<span>                   <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_astro</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/astronomical_chart-1.svg"><!-- --></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">chart_astro</span><span class="op">$</span><span class="va">limits</span><span class="op">[</span><span class="fl">9</span><span class="op">:</span><span class="fl">14</span>, <span class="op">]</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="13%">
<col width="7%">
<col width="8%">
<col width="5%">
<col width="5%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="13%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
<th align="left">astpoint</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">9</td>
<td align="left">01/09/2024</td>
<td align="right">8.83</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.50</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="left">01/10/2024</td>
<td align="right">8.83</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.45</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">01/11/2024</td>
<td align="right">28.00</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.39</td>
<td align="left">improvement</td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="left">01/12/2024</td>
<td align="right">14.84</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.34</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="left">01/01/2025</td>
<td align="right">12.73</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.29</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">01/02/2025</td>
<td align="right">14.97</td>
<td align="right">14.32</td>
<td align="right">4.01</td>
<td align="right">7.44</td>
<td align="right">10.88</td>
<td align="right">17.76</td>
<td align="right">21.19</td>
<td align="right">24.63</td>
<td align="right">14.24</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
<p>Astronomical points indicate special cause variation - something
unusual has occurred that requires investigation. You can adjust the
which limit is used for flagging by changing the
<code>astronomical_limit</code> parameter to “2 Sigma” or “1 Sigma”:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_astro_2s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_astro</span>,</span>
<span>                      keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                      numerators <span class="op">=</span> <span class="va">infections</span>,</span>
<span>                      spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                      outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                        astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        astronomical_limit <span class="op">=</span> <span class="st">"2 Sigma"</span></span>
<span>                      <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_astro_2s</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/astronomical_2sigma-1.svg"><!-- --></p>
</div>
<div class="section level3">
<h3 id="shift-detection">Shift Detection<a class="anchor" aria-label="anchor" href="#shift-detection"></a>
</h3>
<p>A shift occurs when multiple consecutive points fall on the same side
of the centerline, suggesting a sustained change in the process. The
default threshold is 7 consecutive points. This example shows a 6-point
shift, which will not be flagged with the default setting:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with a 6-point shift at the end</span></span>
<span><span class="va">dat_shift</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  satisfaction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">18</span>, mean <span class="op">=</span> <span class="fl">75</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,  <span class="co"># Baseline</span></span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">6</span>, mean <span class="op">=</span> <span class="fl">82</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span>   <span class="co"># 6-point shift at end</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_shift</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_shift</span>,</span>
<span>                   keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                   numerators <span class="op">=</span> <span class="va">satisfaction</span>,</span>
<span>                   spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                   outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                     shift <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                   <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_shift</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/shift_default-1.svg"><!-- --></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">chart_shift</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">10</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="13%">
<col width="7%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="13%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
<th align="left">shift</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">15</td>
<td align="left">01/03/2025</td>
<td align="right">78.37</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">79.12</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">16</td>
<td align="left">01/04/2025</td>
<td align="right">76.55</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">79.34</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">17</td>
<td align="left">01/05/2025</td>
<td align="right">76.60</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">79.55</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">18</td>
<td align="left">01/06/2025</td>
<td align="right">74.81</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">79.77</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">01/07/2025</td>
<td align="right">82.33</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">79.98</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">01/08/2025</td>
<td align="right">83.81</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">80.20</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">01/09/2025</td>
<td align="right">85.06</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">80.41</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">01/10/2025</td>
<td align="right">81.67</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">80.63</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">01/11/2025</td>
<td align="right">86.41</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">80.84</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">01/12/2025</td>
<td align="right">80.72</td>
<td align="right">78.58</td>
<td align="right">67.68</td>
<td align="right">71.31</td>
<td align="right">74.95</td>
<td align="right">82.22</td>
<td align="right">85.85</td>
<td align="right">89.49</td>
<td align="right">81.06</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
<p>You can customize the shift detection by changing
<code>shift_n</code>. Setting it to 5 or 6 will now detect the 6-point
shift:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_shift_6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_shift</span>,</span>
<span>                     keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                     numerators <span class="op">=</span> <span class="va">satisfaction</span>,</span>
<span>                     spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                     outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                       shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       shift_n <span class="op">=</span> <span class="fl">6</span></span>
<span>                     <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_shift_6</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/shift_custom-1.svg"><!-- --></p>
</div>
<div class="section level3">
<h3 id="trend-detection">Trend Detection<a class="anchor" aria-label="anchor" href="#trend-detection"></a>
</h3>
<p>Trends detect monotonic increases or decreases over consecutive
points, indicating a sustained directional change. The default is 5
consecutive points in a consistent direction. This example shows a
4-point trend, which will not be flagged with the default setting:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with a 4-point upward trend at the end</span></span>
<span><span class="va">dat_trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  wait_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, mean <span class="op">=</span> <span class="fl">30</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                <span class="fl">31</span>, <span class="fl">33</span>, <span class="fl">35</span>, <span class="fl">37</span><span class="op">)</span>  <span class="co"># 4-point increasing trend at end</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_trend</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_trend</span>,</span>
<span>                   keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                   numerators <span class="op">=</span> <span class="va">wait_time</span>,</span>
<span>                   spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                   outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                     trend <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                   <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_trend</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/trend_default-1.svg"><!-- --></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">chart_trend</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">10</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="13%">
<col width="7%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="6%">
<col width="13%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
<th align="left">trend</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">15</td>
<td align="left">01/03/2025</td>
<td align="right">32.45</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">31.37</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">16</td>
<td align="left">01/04/2025</td>
<td align="right">31.47</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">31.58</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">17</td>
<td align="left">01/05/2025</td>
<td align="right">26.24</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">31.79</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">18</td>
<td align="left">01/06/2025</td>
<td align="right">33.65</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">32.01</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">01/07/2025</td>
<td align="right">32.02</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">32.22</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">01/08/2025</td>
<td align="right">32.55</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">32.43</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">01/09/2025</td>
<td align="right">31.00</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">32.65</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">01/10/2025</td>
<td align="right">33.00</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">32.86</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">01/11/2025</td>
<td align="right">35.00</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">33.07</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">01/12/2025</td>
<td align="right">37.00</td>
<td align="right">30.84</td>
<td align="right">23.38</td>
<td align="right">25.86</td>
<td align="right">28.35</td>
<td align="right">33.32</td>
<td align="right">35.81</td>
<td align="right">38.3</td>
<td align="right">33.29</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
<p>Setting <code>trend_n</code> to 4 or fewer will now detect the
4-point trend:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_trend_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_trend</span>,</span>
<span>                     keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                     numerators <span class="op">=</span> <span class="va">wait_time</span>,</span>
<span>                     spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                     outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                       trend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       trend_n <span class="op">=</span> <span class="fl">4</span></span>
<span>                     <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_trend_4</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/trend_custom-1.svg"><!-- --></p>
</div>
<div class="section level3">
<h3 id="two-in-three-detection">Two-in-Three Detection<a class="anchor" aria-label="anchor" href="#two-in-three-detection"></a>
</h3>
<p>The 2-in-3 rule detects when 2 out of any 3 consecutive points fall
outside the 2-sigma (95%) warning limits. This pattern suggests early
signs of process change.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create data with 2-in-3 pattern</span></span>
<span><span class="co"># With mean=120 and sd=5, 2-sigma limits are approximately 120 ± 10</span></span>
<span><span class="co"># So values above 130 or below 110 should exceed 2-sigma</span></span>
<span><span class="va">dat_2in3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  pressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">120</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>               <span class="fl">131</span>, <span class="fl">133</span>, <span class="fl">121</span>,  <span class="co"># 2 out of 3 outside 2-sigma (131 and 133 &gt; 130)</span></span>
<span>               <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">13</span>, mean <span class="op">=</span> <span class="fl">120</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_2in3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_2in3</span>,</span>
<span>                  keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                  numerators <span class="op">=</span> <span class="va">pressure</span>,</span>
<span>                  spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                  outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                    two_in_three <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    two_in_three_limit <span class="op">=</span> <span class="st">"2 Sigma"</span></span>
<span>                  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_2in3</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/two_in_three_basic-1.svg"><!-- --></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">chart_2in3</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">12</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="12%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="6%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="12%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
<th align="left">two_in_three</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01/01/2024</td>
<td align="right">122.73</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">125.42</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">01/02/2024</td>
<td align="right">133.96</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">125.09</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">01/03/2024</td>
<td align="right">112.85</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">124.76</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">01/04/2024</td>
<td align="right">122.67</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">124.43</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">01/05/2024</td>
<td align="right">128.49</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">124.09</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">01/06/2024</td>
<td align="right">121.09</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">123.76</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">01/07/2024</td>
<td align="right">120.01</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">123.43</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">01/08/2024</td>
<td align="right">120.50</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">123.10</td>
<td align="left">none</td>
</tr>
<tr class="odd">
<td align="left">01/09/2024</td>
<td align="right">131.00</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">122.77</td>
<td align="left">improvement</td>
</tr>
<tr class="even">
<td align="left">01/10/2024</td>
<td align="right">133.00</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">122.44</td>
<td align="left">improvement</td>
</tr>
<tr class="odd">
<td align="left">01/11/2024</td>
<td align="right">121.00</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">122.11</td>
<td align="left">none</td>
</tr>
<tr class="even">
<td align="left">01/12/2024</td>
<td align="right">118.99</td>
<td align="right">121.62</td>
<td align="right">108.66</td>
<td align="right">112.98</td>
<td align="right">117.3</td>
<td align="right">125.94</td>
<td align="right">130.26</td>
<td align="right">134.58</td>
<td align="right">121.78</td>
<td align="left">none</td>
</tr>
</tbody>
</table>
<p>By default, only the points outside the limits are highlighted. You
can highlight all points in the pattern by setting
<code>two_in_three_highlight_series = TRUE</code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_2in3_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_2in3</span>,</span>
<span>                      keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                      numerators <span class="op">=</span> <span class="va">pressure</span>,</span>
<span>                      spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                      outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                        two_in_three <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        two_in_three_limit <span class="op">=</span> <span class="st">"2 Sigma"</span>,</span>
<span>                        two_in_three_highlight_series <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                      <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_2in3_all</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/two_in_three_highlight_all-1.svg"><!-- --></p>
</div>
</div>
<div class="section level2">
<h2 id="improvement-direction-and-flag-types">Improvement Direction and Flag Types<a class="anchor" aria-label="anchor" href="#improvement-direction-and-flag-types"></a>
</h2>
<div class="section level3">
<h3 id="improvement-direction">Improvement Direction<a class="anchor" aria-label="anchor" href="#improvement-direction"></a>
</h3>
<p>The <code>improvement_direction</code> setting specifies what
constitutes an improvement in your process.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For metrics where lower is better (e.g., infection rates)</span></span>
<span><span class="va">dat_infections</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  infections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">16</span>, mean <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">5</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Improvement (decrease shift)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_inf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_infections</span>,</span>
<span>                 keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                 numerators <span class="op">=</span> <span class="va">infections</span>,</span>
<span>                 spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                 outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                   shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   improvement_direction <span class="op">=</span> <span class="st">"decrease"</span></span>
<span>                 <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_inf</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/improvement_decrease-1.svg"><!-- --></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For metrics where higher is better (e.g., hand hygiene compliance)</span></span>
<span><span class="va">dat_compliance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  compliance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span>, mean <span class="op">=</span> <span class="fl">75</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span>, mean <span class="op">=</span> <span class="fl">85</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Improvement (increase)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_compliance</span>,</span>
<span>                  keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                  numerators <span class="op">=</span> <span class="va">compliance</span>,</span>
<span>                  spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                  outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                    shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    improvement_direction <span class="op">=</span> <span class="st">"increase"</span></span>
<span>                  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_comp</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/improvement_increase-1.svg"><!-- --></p>
<p>Setting <code>improvement_direction = "neutral"</code> treats all
outliers equally, with no distinction between improvement and
deterioration.</p>
</div>
<div class="section level3">
<h3 id="process-flag-type">Process Flag Type<a class="anchor" aria-label="anchor" href="#process-flag-type"></a>
</h3>
<p>The <code>process_flag_type</code> setting allows you to filter which
outliers are flagged. This is useful when you only want to be alerted to
deteriorations (not improvements) or vice versa.</p>
<p>First, let’s create data with both an improvement (decrease) and a
deterioration (increase) in infection rates:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data with both improvement and deterioration</span></span>
<span><span class="va">dat_flag_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  infections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span>, mean <span class="op">=</span> <span class="fl">8</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">5</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>,   <span class="co"># Improvement (decrease)</span></span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">11</span>, mean <span class="op">=</span> <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Deterioration (increase)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>With the default setting (<code>process_flag_type = "both"</code>),
both the improvement and deterioration shifts are flagged:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_both</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_flag_type</span>,</span>
<span>                  keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                  numerators <span class="op">=</span> <span class="va">infections</span>,</span>
<span>                  spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                  outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                    shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    improvement_direction <span class="op">=</span> <span class="st">"decrease"</span>,</span>
<span>                    process_flag_type <span class="op">=</span> <span class="st">"both"</span></span>
<span>                  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_both</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/flag_both-1.svg"><!-- --></p>
<p>Now, setting <code>process_flag_type = "deterioration"</code> will
only flag the increase (deterioration), ignoring the improvement:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_det_only</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_flag_type</span>,</span>
<span>                      keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                      numerators <span class="op">=</span> <span class="va">infections</span>,</span>
<span>                      spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                      outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                        shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        improvement_direction <span class="op">=</span> <span class="st">"decrease"</span>,</span>
<span>                        process_flag_type <span class="op">=</span> <span class="st">"deterioration"</span></span>
<span>                      <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_det_only</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/flag_deterioration_only-1.svg"><!-- --></p>
</div>
</div>
<div class="section level2">
<h2 id="nhs-icons">NHS Icons<a class="anchor" aria-label="anchor" href="#nhs-icons"></a>
</h2>
<p>NHS icons provide standardized visual indicators of process variation
and assurance status.</p>
<div class="section level3">
<h3 id="variation-icons">Variation Icons<a class="anchor" aria-label="anchor" href="#variation-icons"></a>
</h3>
<p>Variation icons indicate the type of variation present in the chart.
By default, icons are only shown if a pattern is detected at the last
point:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data with shift ending at the last point</span></span>
<span><span class="va">dat_var_last</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  readmissions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, mean <span class="op">=</span> <span class="fl">12</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">14</span>, mean <span class="op">=</span> <span class="fl">16</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Shift at end</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_last</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_var_last</span>,</span>
<span>                      keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                      numerators <span class="op">=</span> <span class="va">readmissions</span>,</span>
<span>                      spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                      outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                        astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        improvement_direction <span class="op">=</span> <span class="st">"decrease"</span></span>
<span>                      <span class="op">)</span>,</span>
<span>                      nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                        show_variation_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        flag_last_point <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        variation_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                      <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_last</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/variation_icons_last_point-1.svg"><!-- --></p>
<p>If the pattern occurs earlier in the data but not at the last point,
the icon will not be shown with default settings:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Data with shift in the middle, not at the end</span></span>
<span><span class="va">dat_var_middle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  readmissions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">12</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">16</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,  <span class="co"># Shift in middle</span></span>
<span>                   <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">8</span>, mean <span class="op">=</span> <span class="fl">12</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Back to baseline</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_middle</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_var_middle</span>,</span>
<span>                        keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                        numerators <span class="op">=</span> <span class="va">readmissions</span>,</span>
<span>                        spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                        outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                          astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          improvement_direction <span class="op">=</span> <span class="st">"decrease"</span></span>
<span>                        <span class="op">)</span>,</span>
<span>                        nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                          show_variation_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          flag_last_point <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          variation_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                        <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_middle</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/variation_icons_no_display-1.svg"><!-- --></p>
<p>Setting <code>flag_last_point = FALSE</code> will show icons for all
relevant points, not just the last observation:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_var_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_var_middle</span>,</span>
<span>                     keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                     numerators <span class="op">=</span> <span class="va">readmissions</span>,</span>
<span>                     spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                     outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                       astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       improvement_direction <span class="op">=</span> <span class="st">"decrease"</span></span>
<span>                     <span class="op">)</span>,</span>
<span>                     nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                       show_variation_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                       flag_last_point <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                       variation_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                     <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_all</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/variation_icons_all_points-1.svg"><!-- --></p>
<p>You can also customize the icon placement and scaling:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_var_bl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_var_last</span>,</span>
<span>                    keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                    numerators <span class="op">=</span> <span class="va">readmissions</span>,</span>
<span>                    spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                    outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                      astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      improvement_direction <span class="op">=</span> <span class="st">"decrease"</span></span>
<span>                    <span class="op">)</span>,</span>
<span>                    nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                      show_variation_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      variation_icons_locations <span class="op">=</span> <span class="st">"Bottom Left"</span>,</span>
<span>                      variation_icons_scaling <span class="op">=</span> <span class="fl">1.2</span></span>
<span>                    <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_var_bl</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/variation_icons_placement-1.svg"><!-- --></p>
</div>
<div class="section level3">
<h3 id="assurance-icons">Assurance Icons<a class="anchor" aria-label="anchor" href="#assurance-icons"></a>
</h3>
<p>Assurance icons indicate whether the process is consistently meeting
a target threshold. <strong>Important</strong>: Assurance icons require
an <code>alt_target</code> value to be specified in
<code>line_settings</code>.</p>
<p>The assurance status depends on the position of the
<code>alt_target</code> relative to the 99% control limits:</p>
<ul>
<li>
<strong>Consistent Pass</strong>: Target is below the lower 99%
limit (process consistently exceeds target)</li>
<li>
<strong>Consistent Fail</strong>: Target is above the upper 99%
limit (process consistently below target)</li>
<li>
<strong>Variable</strong>: Target is within the 99% limits (process
sometimes meets, sometimes doesn’t)</li>
</ul>
<div class="section level4">
<h4 id="example-consistent-pass">Example: Consistent Pass<a class="anchor" aria-label="anchor" href="#example-consistent-pass"></a>
</h4>
<p>When the <code>alt_target</code> is below the lower 99% control
limit, the process consistently exceeds the target:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process centered around 95%, target at 90% will be below lower 99% limit</span></span>
<span><span class="va">dat_assurance_pass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  vaccination_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">24</span>, mean <span class="op">=</span> <span class="fl">95</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_pass</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_assurance_pass</span>,</span>
<span>                            keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                            numerators <span class="op">=</span> <span class="va">vaccination_rate</span>,</span>
<span>                            spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                            nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              show_assurance_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              assurance_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                            <span class="op">)</span>,</span>
<span>                            line_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              show_alt_target <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              alt_target <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                              colour_alt_target <span class="op">=</span> <span class="st">"#E69F00"</span></span>
<span>                            <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_pass</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/assurance_pass-1.svg"><!-- --></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">chart_assurance_pass</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">6</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="12%">
<col width="7%">
<col width="8%">
<col width="12%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">alt_target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">19</td>
<td align="left">01/07/2025</td>
<td align="right">93.76</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.55</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">01/08/2025</td>
<td align="right">94.54</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.53</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">01/09/2025</td>
<td align="right">95.01</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.52</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">01/10/2025</td>
<td align="right">95.00</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.50</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">01/11/2025</td>
<td align="right">94.81</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.49</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">01/12/2025</td>
<td align="right">95.85</td>
<td align="right">94.64</td>
<td align="right">90</td>
<td align="right">92.45</td>
<td align="right">93.18</td>
<td align="right">93.91</td>
<td align="right">95.38</td>
<td align="right">96.11</td>
<td align="right">96.84</td>
<td align="right">94.48</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="example-consistent-fail">Example: Consistent Fail<a class="anchor" aria-label="anchor" href="#example-consistent-fail"></a>
</h4>
<p>When the <code>alt_target</code> is above the upper 99% control
limit, the process consistently fails to meet the target:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process centered around 82%, target at 90% will be above upper 99% limit</span></span>
<span><span class="va">dat_assurance_fail</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  vaccination_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">24</span>, mean <span class="op">=</span> <span class="fl">82</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_fail</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_assurance_fail</span>,</span>
<span>                            keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                            numerators <span class="op">=</span> <span class="va">vaccination_rate</span>,</span>
<span>                            spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                            nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              show_assurance_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              assurance_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                            <span class="op">)</span>,</span>
<span>                            line_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              show_alt_target <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              alt_target <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                              colour_alt_target <span class="op">=</span> <span class="st">"#E69F00"</span></span>
<span>                            <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_fail</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/assurance_fail-1.svg"><!-- --></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">chart_assurance_fail</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">6</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="12%">
<col width="7%">
<col width="8%">
<col width="12%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">alt_target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">19</td>
<td align="left">01/07/2025</td>
<td align="right">82.68</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.12</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">01/08/2025</td>
<td align="right">81.12</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.10</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">01/09/2025</td>
<td align="right">81.70</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.08</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">01/10/2025</td>
<td align="right">84.68</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.06</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">01/11/2025</td>
<td align="right">80.31</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.04</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">01/12/2025</td>
<td align="right">81.30</td>
<td align="right">82.24</td>
<td align="right">90</td>
<td align="right">77.71</td>
<td align="right">79.22</td>
<td align="right">80.73</td>
<td align="right">83.75</td>
<td align="right">85.26</td>
<td align="right">86.77</td>
<td align="right">82.02</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="example-variable-performance">Example: Variable Performance<a class="anchor" aria-label="anchor" href="#example-variable-performance"></a>
</h4>
<p>When the <code>alt_target</code> falls within the 99% control limits,
performance is variable:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process centered around 90%, target at 90% will be within limits</span></span>
<span><span class="va">dat_assurance_variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span>, length.out <span class="op">=</span> <span class="fl">24</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span>,</span>
<span>  vaccination_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">24</span>, mean <span class="op">=</span> <span class="fl">90</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_variable</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_assurance_variable</span>,</span>
<span>                                keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                                numerators <span class="op">=</span> <span class="va">vaccination_rate</span>,</span>
<span>                                spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                                nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                  show_assurance_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                  assurance_icons_locations <span class="op">=</span> <span class="st">"Top Right"</span></span>
<span>                                <span class="op">)</span>,</span>
<span>                                line_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                  show_alt_target <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                  alt_target <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                                  colour_alt_target <span class="op">=</span> <span class="st">"#E69F00"</span></span>
<span>                                <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_assurance_variable</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/assurance_variable-1.svg"><!-- --></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">chart_assurance_variable</span><span class="op">$</span><span class="va">limits</span>, <span class="fl">6</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="12%">
<col width="7%">
<col width="8%">
<col width="12%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">value</th>
<th align="right">target</th>
<th align="right">alt_target</th>
<th align="right">ll99</th>
<th align="right">ll95</th>
<th align="right">ll68</th>
<th align="right">ul68</th>
<th align="right">ul95</th>
<th align="right">ul99</th>
<th align="right">trend_line</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">19</td>
<td align="left">01/07/2025</td>
<td align="right">88.97</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.26</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">01/08/2025</td>
<td align="right">87.33</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.28</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">01/09/2025</td>
<td align="right">91.77</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.30</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">01/10/2025</td>
<td align="right">91.78</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.32</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">01/11/2025</td>
<td align="right">89.15</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.34</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">01/12/2025</td>
<td align="right">88.32</td>
<td align="right">90.13</td>
<td align="right">90</td>
<td align="right">83.83</td>
<td align="right">85.93</td>
<td align="right">88.03</td>
<td align="right">92.23</td>
<td align="right">94.33</td>
<td align="right">96.43</td>
<td align="right">90.36</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="combined-variation-and-assurance-icons">Combined Variation and Assurance Icons<a class="anchor" aria-label="anchor" href="#combined-variation-and-assurance-icons"></a>
</h3>
<p>You can display both icon types simultaneously:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chart_both_icons</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spc.html">spc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_assurance_pass</span>,</span>
<span>                        keys <span class="op">=</span> <span class="va">month</span>,</span>
<span>                        numerators <span class="op">=</span> <span class="va">vaccination_rate</span>,</span>
<span>                        spc_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>chart_type <span class="op">=</span> <span class="st">"i"</span><span class="op">)</span>,</span>
<span>                        outlier_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                          astronomical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          shift <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          trend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          improvement_direction <span class="op">=</span> <span class="st">"increase"</span></span>
<span>                        <span class="op">)</span>,</span>
<span>                        nhs_icon_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                          show_variation_icons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          show_assurance_icons <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                        <span class="op">)</span>,</span>
<span>                        line_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                          show_alt_target <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                          alt_target <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                          colour_alt_target <span class="op">=</span> <span class="st">"#E69F00"</span></span>
<span>                        <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chart_both_icons</span><span class="op">$</span><span class="va">static_plot</span></span></code></pre></div>
<p><img src="outlier_detection_files/figure-html/combined_icons-1.svg"><!-- --></p>
</div>
</div>
<div class="section level2">
<h2 id="settings-reference">Settings Reference<a class="anchor" aria-label="anchor" href="#settings-reference"></a>
</h2>
<div class="section level3">
<h3 id="outlier-detection-settings">Outlier Detection Settings<a class="anchor" aria-label="anchor" href="#outlier-detection-settings"></a>
</h3>
<table class="table">
<colgroup>
<col width="18%">
<col width="12%">
<col width="18%">
<col width="31%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th>Setting</th>
<th>Type</th>
<th>Default</th>
<th>Options/Range</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>astronomical</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Detect points outside limits</td>
</tr>
<tr class="even">
<td><code>astronomical_limit</code></td>
<td>character</td>
<td>“3 Sigma”</td>
<td>“1 Sigma”, “2 Sigma”, “3 Sigma”, “Specification”</td>
<td>Which limit to use</td>
</tr>
<tr class="odd">
<td><code>shift</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Detect runs on one side</td>
</tr>
<tr class="even">
<td><code>shift_n</code></td>
<td>numeric</td>
<td>7</td>
<td>Min: 1</td>
<td>Points needed for shift</td>
</tr>
<tr class="odd">
<td><code>trend</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Detect trends</td>
</tr>
<tr class="even">
<td><code>trend_n</code></td>
<td>numeric</td>
<td>5</td>
<td>Min: 1</td>
<td>Points needed for trend</td>
</tr>
<tr class="odd">
<td><code>two_in_three</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Detect 2-in-3 pattern</td>
</tr>
<tr class="even">
<td><code>two_in_three_limit</code></td>
<td>character</td>
<td>“2 Sigma”</td>
<td>“1 Sigma”, “2 Sigma”, “3 Sigma”, “Specification”</td>
<td>Warning limit</td>
</tr>
<tr class="odd">
<td><code>two_in_three_highlight_series</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Highlight all vs outliers only</td>
</tr>
<tr class="even">
<td><code>improvement_direction</code></td>
<td>character</td>
<td>“increase”</td>
<td>“increase”, “decrease”, “neutral”</td>
<td>What constitutes improvement</td>
</tr>
<tr class="odd">
<td><code>process_flag_type</code></td>
<td>character</td>
<td>“both”</td>
<td>“both”, “improvement”, “deterioration”</td>
<td>Which outliers to flag</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="nhs-icon-settings">NHS Icon Settings<a class="anchor" aria-label="anchor" href="#nhs-icon-settings"></a>
</h3>
<table class="table">
<colgroup>
<col width="18%">
<col width="12%">
<col width="18%">
<col width="31%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th>Setting</th>
<th>Type</th>
<th>Default</th>
<th>Options/Range</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>show_variation_icons</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Display variation icons</td>
</tr>
<tr class="even">
<td><code>flag_last_point</code></td>
<td>boolean</td>
<td>TRUE</td>
<td>TRUE/FALSE</td>
<td>Icon on last point only</td>
</tr>
<tr class="odd">
<td><code>variation_icons_locations</code></td>
<td>character</td>
<td>“Top Right”</td>
<td>“Top Right”, “Bottom Right”, “Top Left”, “Bottom Left”</td>
<td>Icon placement</td>
</tr>
<tr class="even">
<td><code>variation_icons_scaling</code></td>
<td>numeric</td>
<td>1</td>
<td>Min: 0</td>
<td>Icon size multiplier</td>
</tr>
<tr class="odd">
<td><code>show_assurance_icons</code></td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE/FALSE</td>
<td>Display assurance icons</td>
</tr>
<tr class="even">
<td><code>assurance_icons_locations</code></td>
<td>character</td>
<td>“Top Right”</td>
<td>“Top Right”, “Bottom Right”, “Top Left”, “Bottom Left”</td>
<td>Icon placement</td>
</tr>
<tr class="odd">
<td><code>assurance_icons_scaling</code></td>
<td>numeric</td>
<td>1</td>
<td>Min: 0</td>
<td>Icon size multiplier</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: Assurance icons require
<code>alt_target</code> to be specified in
<code>line_settings</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="additional-resources">Additional Resources<a class="anchor" aria-label="anchor" href="#additional-resources"></a>
</h2>
<p>For more information, see:</p>
<ul>
<li>
<code><a href="../articles/getting_started.html">vignette("getting_started")</a></code> - Basic package usage</li>
<li>
<code><a href="../articles/chart_types.html">vignette("chart_types")</a></code> - All available chart
types</li>
<li>
<code>vignette("interactive_charts")</code> - Interactive features
with crosstalk</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew R. Johnson, Healthcare Quality Intelligence Unit (Western Australia Health).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
