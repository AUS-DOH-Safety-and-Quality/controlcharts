function makeFactory(t){return function(e,a,i){var o=new crosstalk.FilterHandle,r=new crosstalk.SelectionHandle,s=new window[t].Visual(makeConstructorArgs(e)),n={dataViews:[],viewport:{width:a,height:i},type:2};return s.selectionManager.getSelectionIds=()=>r.value??[],s.selectionManager.clear=()=>r.clear(),s.selectionManager.select=(t,e)=>{var a=t;return e&&r.value&&(a=a.concat(r.value)),r.set(a),{then:t=>t()}},s.svg.append("g").classed("chart-tooltip-group",!0),{renderValue:function(t){updateChartTitle(s.svg,t.title_settings);var e=makeUpdateValues(t.data_raw,t.input_settings,t.aggregations,t.has_conditional_formatting,t.unique_categories);n.dataViews=e.dataViews,r.setGroup(t.crosstalk_group),o.setGroup(t.crosstalk_group),r.on("change",function(t){s.updateHighlighting()}),o.on("change",function(e){var a=makeUpdateValues(t.data_raw,t.input_settings,t.aggregations,t.has_conditional_formatting,t.unique_categories,e.value);n.dataViews=a.dataViews,n.type=2,n.frontend=!0,s.update(n)}),s.host.createSelectionIdBuilder=()=>({withCategory:(t,a)=>({createSelectionId:()=>e.crosstalk_identities[t.values[a]]})}),s.host.tooltipService.show=e=>{var a=s.svg.node().getBoundingClientRect(),i=s.svg.select(".chart-tooltip-group"),o=0,r=i.selectAll("rect").data([0]).join("rect"),n=t.tooltip_settings.ttip_font_size,l=t.tooltip_settings.ttip_font,c=t.tooltip_settings.ttip_font_color;i.selectAll("text").data(e.dataItems).join("text").attr("x",5).attr("y",(t,e)=>15+15*e).text(t=>`${t.displayName}: ${t.value}`).style("text-anchor","left").style("font-size",`${n}px`).style("font-family",l).style("fill",c).each(function(){var t=this.getComputedTextLength();o=Math.max(o,t)});var g=e.coordinates;g[0]+o>a.width&&(g[0]=g[0]-o-10),g[1]+15*e.dataItems.length>a.height&&(g[1]=g[1]-15*e.dataItems.length-5),r.attr("fill",t.tooltip_settings.ttip_background_color).attr("stroke",t.tooltip_settings.ttip_border_color).attr("stroke-width",t.tooltip_settings.ttip_border_width).attr("opacity",t.tooltip_settings.ttip_opacity).attr("rx",t.tooltip_settings.ttip_border_radius).attr("ry",t.tooltip_settings.ttip_border_radius).attr("x",0).attr("y",0).attr("width",o+10).attr("height",15*e.dataItems.length+5),i.attr("transform",`translate(${g[0]}, ${g[1]})`)},s.host.tooltipService.hide=()=>{s.svg.select(".chart-tooltip-group").selectChildren().remove()},s.update(n)},resize:function(t,e){n.viewport.width=t,n.viewport.height=e,n.type=4,s.update(n)}}}}
