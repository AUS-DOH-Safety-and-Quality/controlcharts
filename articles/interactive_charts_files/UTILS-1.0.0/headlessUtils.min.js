function initialiseHeadless(){const{document:e,window:s}=minidom.dummyDOM();globalThis.document=e,globalThis.window=s;var i=spc.d3.select(e.body).append("div").classed("spc-container",!0).node();globalThis.spcVisual=new spc.Visual(makeConstructorArgs(i));var t=spc.d3.select(e.body).append("div").classed("funnel-container",!0).node();globalThis.funnelVisual=new funnel.Visual(makeConstructorArgs(t))}function updateHeadlessVisual(e,s,i,t,n){var a={dataViews:s,viewport:{width:t,height:n},type:2,headless:!0,frontend:!0},l=globalThis[e+"Visual"];if(l.update(a),updateChartTitle(l.svg,i),l.svg.select(".errormessage").size()>0)return{error:l.svg.select(".errormessage").text()};var o={plotPoints:"funnel"===e?l.viewModel.plotPoints:l.viewModel.plotPoints[0],svg:l.svg.node().innerHTML,calculatedLimits:"funnel"===e?l.viewModel.calculatedLimits:void 0};return l.update({dataViews:[],viewport:{width:t,height:n},type:2,headless:!0,frontend:!0}),o}
